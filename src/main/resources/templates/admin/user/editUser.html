<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="index">
    
<head>
<meta charset="UTF-8"/>
<title>edit user</title>
</head>

<div layout:fragment="content">
	<h2 th:text="#{page.user.edit}"></h2>
	<form th:object="${user}" method="post" th:action="@{/admin/user/edit}" enctype="multipart/form-data">
		<input th:field="*{id}" type="hidden" value="${user.id}">
		<input th:field="*{avatar}" type="hidden" value="${user.avatar}">
		<p>
		<label for="fileAvatar" th:text="#{label.user.avatar}"></label><br/>
		<img alt="${user.avatar}" th:src="@{download-file?image=__${user.avatar}__}" width="100" height="100"><br/>
		<input name="fileAvatar" type="file" accept="image/*"/><br/>
		</p>
	  	<p>
		<label for="name" th:text="#{label.user.name}"></label><br/>
		<input th:field="*{name}" name="name" type="text" value="${user.name}"/><br/>
		<span class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></span>
	  	</p>
	  	<p>
	  	<label for="username" th:text="#{label.user.username}"></label><br/>
	  	<input th:field="*{username}" type="text" value="${user.username}"/><br/>
	  	<span class="error" th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></span>
	  	</p>
	  	<p>
	  	<label for="password" th:text="#{label.user.password}"></label><br/>
	  	<input th:field="*{password}" type="text" value="${user.password}"/><br/>
	  	<span class="error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></span>
	  	</p>
	  	<p>
	  	<label for="gender" th:text="#{label.user.gender}"></label><br/>
	  	<input name="gender" type="radio" value="male" th:text="#{label.user.gender.male}" th:checked="${user.gender == 'male'}" />
	    <input name="gender" type="radio" value="female" th:text="#{label.user.gender.female}" th:checked="${user.gender == 'female'}"/>
	  	</p>
	  	<p>
	  	<label for="role" th:text="#{label.user.role}"></label><br/>
	    <input name="role" type="radio" value="ROLE_ADMIN" th:text="#{label.user.role.admin}" th:checked="${user.role == 'ROLE_ADMIN'}"/>
	    <input name="role" type="radio" value="ROLE_MEMBER" th:text="#{label.user.role.member}" th:checked="${user.role == 'ROLE_MEMBER'}" />
	    <input name="role" type="radio" value="UNKNOWN" th:text="#{label.user.role.unknown}" th:checked="${user.role == 'UNKNOWN'}" />
	  	</p>
	  	<p>
	 	<input name="access" type="checkbox" value="1" th:text="#{label.user.access}" th:checked="${user.access == 1}" /> <br/>
	  	</p>
	  	<p>
	  	<label for="favourite" th:text="#{label.user.favourites}"></label><br/>
	 	<input name="favourite" type="checkbox" value="music" th:text="#{label.user.favourites.music}" th:checked="${#strings.contains('__${user.favourite}__','music')}" /> <br/>
	    <input name="favourite" type="checkbox" value="game" th:text="#{label.user.favourites.game}" th:checked="${#strings.contains('__${user.favourite}__','game')}" /> <br/>
	  	</p>
	  	<p>
	  	<label for="about" th:text="#{label.user.about}"></label><br/>
	  	<textarea th:field="*{about}">${user.about}</textarea><br/>
	  	</p>
	  	<button type="submit" th:text="#{label.action.edit}"></button>  	
	</form>
</div>
  
</html>